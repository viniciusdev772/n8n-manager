/* ═══════════════════════════════════════════════
   N8N Manager — Terminal Luxe Theme
   DM Sans + JetBrains Mono · Emerald Teal Accent
   ═══════════════════════════════════════════════ */

/* ── Reset ──────────────────────────────────── */
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}

:root{
  /* Surfaces */
  --bg:        #0a0c10;
  --bg-raised: #0f1218;
  --bg-card:   #141820;
  --bg-input:  #0d0f14;

  /* Borders */
  --border:    #1c2030;
  --border-hi: #2a3048;

  /* Text */
  --text:      #d8dce8;
  --text-dim:  #7c8498;
  --text-mute: #4a5068;

  /* Accent — emerald teal */
  --accent:    #34d399;
  --accent-bg: rgba(52,211,153,.08);
  --accent-border: rgba(52,211,153,.2);

  /* Semantic */
  --green:  #34d399;
  --amber:  #fbbf24;
  --red:    #f87171;
  --blue:   #60a5fa;
  --rose:   #fb7185;

  /* Radii */
  --r:  6px;
  --r2: 10px;
  --r3: 16px;

  /* Fonts */
  --font-body: 'DM Sans', sans-serif;
  --font-mono: 'JetBrains Mono', monospace;

  /* Sidebar */
  --sidebar-w: 240px;
}

html{font-size:14px;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}
body{font-family:var(--font-body);background:var(--bg);color:var(--text);min-height:100vh;overflow-x:hidden;line-height:1.5}
a{color:var(--accent);text-decoration:none;transition:color .15s}
a:hover{color:#6ee7b7}
.hidden{display:none!important}
::selection{background:rgba(52,211,153,.25);color:#fff}

/* ── Grain Overlay ──────────────────────────── */
.grain{position:fixed;inset:0;pointer-events:none;z-index:9999;opacity:.035;
  background-image:url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.85' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");
}

/* ── Stagger Animations ─────────────────────── */
.stagger-in{
  animation: fadeSlideUp .5s cubic-bezier(.16,1,.3,1) both;
  animation-delay: calc(var(--delay, 0) * 80ms);
}
@keyframes fadeSlideUp{
  from{opacity:0;transform:translateY(12px)}
  to{opacity:1;transform:translateY(0)}
}

/* ── Login Screen ───────────────────────────── */
.login-screen{display:flex;align-items:center;justify-content:center;min-height:100vh;position:relative}
.login-backdrop{position:absolute;inset:0;overflow:hidden}
.login-grid-lines{
  position:absolute;inset:-50%;
  background-image:
    linear-gradient(var(--border) 1px, transparent 1px),
    linear-gradient(90deg, var(--border) 1px, transparent 1px);
  background-size:60px 60px;
  opacity:.3;
  transform:perspective(500px) rotateX(60deg);
  transform-origin:center 70%;
}
.login-card{
  position:relative;z-index:2;
  background:var(--bg-raised);
  border:1px solid var(--border-hi);
  border-radius:var(--r3);
  padding:2.75rem 2.5rem;
  width:400px;
  animation: fadeSlideUp .6s cubic-bezier(.16,1,.3,1) both;
  box-shadow:0 0 80px rgba(52,211,153,.04), 0 24px 48px rgba(0,0,0,.3);
}
.login-brand{display:flex;align-items:center;gap:.75rem;margin-bottom:.5rem;justify-content:center}
.login-icon{color:var(--accent)}
.login-logo{font-size:1.6rem;font-weight:700;letter-spacing:-.02em;color:var(--text)}
.login-logo span{color:var(--accent);font-weight:300;margin-left:.15em}
.login-subtitle{color:var(--text-dim);text-align:center;margin-bottom:2rem;font-size:.9rem}
.login-field{margin-bottom:1.5rem}
.login-field label{display:block;font-family:var(--font-mono);font-size:.7rem;color:var(--text-mute);letter-spacing:.1em;margin-bottom:.5rem}

.input-wrap{position:relative}
.input-icon{position:absolute;left:.85rem;top:50%;transform:translateY(-50%);color:var(--text-mute);pointer-events:none}
.input-wrap input{width:100%;padding:.8rem .85rem .8rem 2.6rem;background:var(--bg-input);border:1px solid var(--border);border-radius:var(--r2);color:var(--text);font-size:.9rem;outline:none;transition:all .2s}
.input-wrap input:focus{border-color:var(--accent);box-shadow:0 0 0 3px var(--accent-bg)}
.input-wrap input::placeholder{color:var(--text-mute)}

#login-btn{
  width:100%;padding:.85rem 1rem;
  background:var(--accent);color:#0a0c10;
  border:none;border-radius:var(--r2);
  font-family:var(--font-body);font-size:.95rem;font-weight:600;
  cursor:pointer;transition:all .2s;
  display:flex;align-items:center;justify-content:center;gap:.5rem;
}
#login-btn:hover{background:#6ee7b7;transform:translateY(-1px);box-shadow:0 4px 20px rgba(52,211,153,.25)}
#login-btn:active{transform:translateY(0)}
.error{color:var(--red);font-size:.85rem;margin-top:.75rem;text-align:center}

/* ── App Layout ─────────────────────────────── */
#app{display:flex;min-height:100vh}

/* ── Sidebar ────────────────────────────────── */
.sidebar{
  width:var(--sidebar-w);
  background:var(--bg-raised);
  border-right:1px solid var(--border);
  display:flex;flex-direction:column;
  position:fixed;top:0;left:0;bottom:0;z-index:20;
  padding:0;
  transition:width .2s ease;
}
.sidebar-top{padding:1.5rem 1.25rem 1rem}
.sidebar-brand{display:flex;align-items:center;gap:.6rem}
.brand-mark{
  font-family:var(--font-mono);font-size:1rem;font-weight:600;
  color:var(--bg);background:var(--accent);
  width:34px;height:34px;
  display:flex;align-items:center;justify-content:center;
  border-radius:var(--r);
  letter-spacing:-.02em;
  flex-shrink:0;
}
.brand-text{font-size:.95rem;font-weight:500;color:var(--text-dim);letter-spacing:-.01em}

.sidebar-nav{flex:1;padding:.5rem .75rem;display:flex;flex-direction:column;gap:2px}

.nav-item{
  display:flex;align-items:center;gap:.7rem;
  padding:.65rem .75rem;
  background:none;border:none;
  color:var(--text-dim);
  font-family:var(--font-body);font-size:.88rem;font-weight:500;
  border-radius:var(--r);
  cursor:pointer;transition:all .15s;
  text-align:left;width:100%;
  position:relative;
}
.nav-item:hover{color:var(--text);background:rgba(255,255,255,.03)}
.nav-item.active{
  color:var(--accent);background:var(--accent-bg);
}
.nav-item.active::before{
  content:'';position:absolute;left:0;top:50%;transform:translateY(-50%);
  width:3px;height:18px;background:var(--accent);border-radius:0 3px 3px 0;
}
.nav-item svg{flex-shrink:0;opacity:.7}
.nav-item.active svg{opacity:1}

.nav-divider{height:1px;background:var(--border);margin:.6rem .75rem}

.sidebar-footer{padding:.75rem;border-top:1px solid var(--border)}
.nav-logout{color:var(--text-mute)}
.nav-logout:hover{color:var(--red);background:rgba(248,113,113,.06)}

/* ── Main Content ───────────────────────────── */
.main{
  margin-left:var(--sidebar-w);flex:1;
  padding:2.5rem 3rem;
  max-width:1200px;
  min-height:100vh;
}

/* ── Page Intro ─────────────────────────────── */
.page-intro{margin-bottom:1.75rem}
h1{font-size:1.65rem;font-weight:700;letter-spacing:-.02em;margin-bottom:.15rem;color:#fff}
.page-desc{color:var(--text-dim);font-size:.9rem}
.page-header{display:flex;align-items:flex-start;justify-content:space-between;gap:1rem}
h2{font-size:1rem;font-weight:600;color:var(--text-dim);letter-spacing:-.01em}

.section-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:1rem;gap:.75rem}

/* ── Metric Cards ───────────────────────────── */
.metrics-grid{
  display:grid;
  grid-template-columns:repeat(auto-fill, minmax(190px, 1fr));
  gap:.75rem;
  margin-bottom:2.25rem;
}
.metric-card{
  background:var(--bg-card);
  border:1px solid var(--border);
  border-radius:var(--r2);
  padding:1.15rem 1.25rem;
  display:flex;align-items:flex-start;gap:1rem;
  transition:all .2s;
}
.metric-card:hover{border-color:var(--border-hi);transform:translateY(-1px)}
.metric-icon{
  width:38px;height:38px;
  display:flex;align-items:center;justify-content:center;
  border-radius:var(--r);
  background:var(--accent-bg);color:var(--accent);
  flex-shrink:0;
}
.icon-teal{background:rgba(52,211,153,.08);color:#34d399}
.icon-amber{background:rgba(251,191,36,.08);color:#fbbf24}
.icon-rose{background:rgba(251,113,133,.08);color:#fb7185}
.icon-blue{background:rgba(96,165,250,.08);color:#60a5fa}
.metric-body{display:flex;flex-direction:column}
.metric-label{font-size:.72rem;font-family:var(--font-mono);color:var(--text-mute);text-transform:uppercase;letter-spacing:.08em;margin-bottom:.25rem}
.metric-value{font-size:1.35rem;font-weight:700;font-family:var(--font-mono);letter-spacing:-.02em}

/* ── Buttons ────────────────────────────────── */
.btn{
  padding:.55rem 1rem;
  border:none;border-radius:var(--r);
  font-family:var(--font-body);font-size:.82rem;font-weight:600;
  cursor:pointer;transition:all .15s;
  display:inline-flex;align-items:center;gap:.4rem;
  line-height:1;
}
.btn:hover{transform:translateY(-1px)}
.btn:active{transform:translateY(0)}
.btn:disabled{opacity:.4;cursor:not-allowed;transform:none}

.btn-primary{background:var(--accent);color:#0a0c10}
.btn-primary:hover{background:#6ee7b7;box-shadow:0 2px 12px rgba(52,211,153,.2)}

.btn-outline{
  background:transparent;color:var(--text-dim);
  border:1px solid var(--border);
}
.btn-outline:hover{color:var(--text);border-color:var(--border-hi);background:rgba(255,255,255,.02)}

.btn-amber{background:rgba(251,191,36,.15);color:var(--amber);border:1px solid rgba(251,191,36,.2)}
.btn-amber:hover{background:rgba(251,191,36,.25)}

.btn-danger{background:rgba(248,113,113,.15);color:var(--red);border:1px solid rgba(248,113,113,.2)}
.btn-danger:hover{background:rgba(248,113,113,.25)}

.btn-sm{padding:.4rem .7rem;font-size:.78rem}
.btn-full{width:100%;justify-content:center;padding:.75rem}

.btn-back{
  display:inline-flex;align-items:center;gap:.35rem;
  background:none;border:none;color:var(--text-mute);
  font-family:var(--font-body);font-size:.85rem;font-weight:500;
  cursor:pointer;padding:.35rem 0;margin-bottom:.5rem;transition:color .15s;
}
.btn-back:hover{color:var(--accent)}

/* ── Tables ─────────────────────────────────── */
.table-wrap{overflow-x:auto;border-radius:var(--r2);border:1px solid var(--border);background:var(--bg-card)}
table{width:100%;border-collapse:collapse}
th{
  text-align:left;padding:.7rem 1rem;
  font-family:var(--font-mono);font-size:.68rem;font-weight:600;
  color:var(--text-mute);text-transform:uppercase;letter-spacing:.08em;
  border-bottom:1px solid var(--border);
  background:var(--bg-raised);
}
td{
  padding:.75rem 1rem;
  border-bottom:1px solid var(--border);
  font-size:.88rem;vertical-align:middle;
}
tr:last-child td{border-bottom:none}
tr:hover td{background:rgba(255,255,255,.015)}
tbody tr{transition:background .1s}

.status-badge{
  display:inline-flex;align-items:center;gap:.35rem;
  padding:.2rem .6rem;border-radius:999px;
  font-family:var(--font-mono);font-size:.72rem;font-weight:600;
  letter-spacing:.02em;
}
.status-badge::before{
  content:'';width:6px;height:6px;border-radius:50%;flex-shrink:0;
}
.status-running{background:rgba(52,211,153,.1);color:var(--green)}
.status-running::before{background:var(--green);box-shadow:0 0 6px var(--green)}
.status-exited{background:rgba(248,113,113,.1);color:var(--red)}
.status-exited::before{background:var(--red)}
.status-created{background:rgba(251,191,36,.1);color:var(--amber)}
.status-created::before{background:var(--amber)}

/* ── Forms ──────────────────────────────────── */
.form-card{
  background:var(--bg-card);border:1px solid var(--border);
  border-radius:var(--r2);padding:2rem;max-width:500px;
}
.form-group{margin-bottom:1.5rem}
.form-group label{
  display:block;
  font-family:var(--font-mono);font-size:.7rem;font-weight:600;
  color:var(--text-mute);text-transform:uppercase;letter-spacing:.08em;
  margin-bottom:.5rem;
}
.form-card input,.form-card select{
  width:100%;padding:.75rem .85rem;
  background:var(--bg-input);border:1px solid var(--border);
  border-radius:var(--r);color:var(--text);
  font-family:var(--font-body);font-size:.9rem;
  outline:none;transition:all .2s;
}
.form-card .input-wrap input{padding-left:2.6rem}
.form-card input:focus,.form-card select:focus{border-color:var(--accent);box-shadow:0 0 0 3px var(--accent-bg)}
.form-card select{cursor:pointer;-webkit-appearance:none;appearance:none;
  background-image:url("data:image/svg+xml,%3Csvg width='12' height='8' viewBox='0 0 12 8' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1 1.5L6 6.5L11 1.5' stroke='%237c8498' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E");
  background-repeat:no-repeat;background-position:right .85rem center;padding-right:2.2rem;
}
.field-hint{display:block;font-size:.75rem;color:var(--text-mute);margin-top:.4rem}

.version-form{margin:1rem 0;display:flex;gap:.5rem;align-items:center}
.version-form select{
  padding:.5rem .75rem;background:var(--bg-input);
  border:1px solid var(--border);border-radius:var(--r);
  color:var(--text);font-size:.85rem;
  -webkit-appearance:none;appearance:none;
  background-image:url("data:image/svg+xml,%3Csvg width='12' height='8' viewBox='0 0 12 8' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1 1.5L6 6.5L11 1.5' stroke='%237c8498' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E");
  background-repeat:no-repeat;background-position:right .75rem center;padding-right:2rem;
}

/* ── Action Bar ─────────────────────────────── */
.action-bar{display:flex;gap:.5rem;flex-wrap:wrap;margin:1.5rem 0}

/* ── Progress ───────────────────────────────── */
.progress-wrap{margin-top:1.5rem}
.progress-track{
  width:100%;height:6px;
  background:var(--border);border-radius:99px;
  overflow:hidden;
}
.progress-fill{
  height:100%;background:var(--accent);border-radius:99px;
  width:0%;transition:width .4s cubic-bezier(.16,1,.3,1);
  box-shadow:0 0 12px rgba(52,211,153,.3);
}
.progress-msg{color:var(--text-dim);font-size:.82rem;margin-top:.6rem;font-family:var(--font-mono)}

#create-result{margin-top:1rem;padding:1rem 1.25rem;border-radius:var(--r);font-size:.88rem}
#create-result.success{background:rgba(52,211,153,.08);border:1px solid var(--accent-border);color:var(--green)}
#create-result.error{background:rgba(248,113,113,.08);border:1px solid rgba(248,113,113,.2);color:var(--red)}

/* ── Logs ────────────────────────────────────── */
.logs-box{
  background:var(--bg-input);border:1px solid var(--border);
  border-radius:var(--r2);padding:1.25rem;
  font-family:var(--font-mono);font-size:.78rem;
  color:var(--text-dim);
  max-height:420px;overflow:auto;
  white-space:pre-wrap;word-break:break-all;line-height:1.7;
  margin-top:.5rem;
}
.logs-box::-webkit-scrollbar{width:6px}
.logs-box::-webkit-scrollbar-track{background:transparent}
.logs-box::-webkit-scrollbar-thumb{background:var(--border-hi);border-radius:3px}

/* ── Empty State ────────────────────────────── */
.empty-state{
  display:flex;flex-direction:column;align-items:center;justify-content:center;
  padding:3rem 1rem;color:var(--text-mute);text-align:center;gap:.75rem;
}
.empty-state svg{opacity:.3}
.empty-state p{font-size:.9rem}

/* ── Pulse Dot ──────────────────────────────── */
.pulse-dot{
  width:8px;height:8px;background:var(--accent);border-radius:50%;
  display:inline-block;
  animation:pulse 2s ease-in-out infinite;
  box-shadow:0 0 8px var(--accent);
}
@keyframes pulse{0%,100%{opacity:1}50%{opacity:.3}}

/* ── Env Vars Table ─────────────────────────── */
.env-table-wrap{margin-top:.5rem}
.env-table{width:100%;border-collapse:collapse;font-size:.82rem}
.env-table th{
  text-align:left;padding:.55rem .85rem;
  font-family:var(--font-mono);font-size:.68rem;font-weight:600;
  color:var(--text-mute);text-transform:uppercase;letter-spacing:.08em;
  border-bottom:1px solid var(--border);background:var(--bg-raised);
}
.env-table td{
  padding:.5rem .85rem;border-bottom:1px solid var(--border);
  vertical-align:top;word-break:break-all;
}
.env-table tr:last-child td{border-bottom:none}
.env-table tr:hover td{background:rgba(255,255,255,.015)}
.env-key{font-family:var(--font-mono);font-weight:600;color:var(--accent);white-space:nowrap;font-size:.78rem}
.env-value{font-family:var(--font-mono);color:var(--text-dim);font-size:.78rem}
.env-lookup{display:flex;align-items:center;gap:.5rem;margin-bottom:.75rem}
.env-lookup .input-wrap input{padding:.55rem .85rem .55rem 2.4rem;font-size:.85rem}
.env-count{font-size:.78rem;color:var(--text-mute);margin-top:.5rem;font-family:var(--font-mono)}

/* ── Debug ──────────────────────────────────── */
.debug-panel{display:flex;flex-direction:column;gap:2rem}
.debug-block{}

/* ── Modal ──────────────────────────────────── */
.modal-overlay{
  position:fixed;inset:0;
  background:rgba(0,0,0,.65);
  backdrop-filter:blur(4px);-webkit-backdrop-filter:blur(4px);
  display:flex;align-items:center;justify-content:center;z-index:100;
}
.modal{
  background:var(--bg-raised);border:1px solid var(--border-hi);
  border-radius:var(--r3);padding:2.25rem;width:400px;text-align:center;
  animation:modalIn .25s cubic-bezier(.16,1,.3,1);
  box-shadow:0 24px 48px rgba(0,0,0,.4);
}
@keyframes modalIn{from{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}
.modal-icon{color:var(--amber);margin-bottom:1rem}
.modal p{margin-bottom:1.5rem;font-size:.92rem;line-height:1.6;color:var(--text-dim)}
.modal-actions{display:flex;gap:.6rem;justify-content:center}

/* ── Toast ──────────────────────────────────── */
.toast{
  position:fixed;bottom:1.5rem;right:1.5rem;
  background:var(--bg-card);border:1px solid var(--border-hi);
  border-radius:var(--r2);padding:.85rem 1.35rem;
  font-size:.85rem;font-weight:500;
  z-index:200;
  animation:toastIn .35s cubic-bezier(.16,1,.3,1);
  box-shadow:0 8px 32px rgba(0,0,0,.35);
  display:flex;align-items:center;gap:.5rem;
}
.toast.success{border-color:var(--accent-border);color:var(--green)}
.toast.error{border-color:rgba(248,113,113,.3);color:var(--red)}
@keyframes toastIn{from{opacity:0;transform:translateY(12px)}to{opacity:1;transform:translateY(0)}}

/* ── Scrollbar ──────────────────────────────── */
::-webkit-scrollbar{width:8px;height:8px}
::-webkit-scrollbar-track{background:transparent}
::-webkit-scrollbar-thumb{background:var(--border-hi);border-radius:4px}
::-webkit-scrollbar-thumb:hover{background:var(--text-mute)}

/* ── Responsive ─────────────────────────────── */
@media(max-width:768px){
  :root{--sidebar-w:64px}
  .sidebar-brand .brand-text{display:none}
  .nav-item span,.nav-logout span{display:none}
  .nav-item{justify-content:center;padding:.65rem}
  .nav-item.active::before{display:none}
  .main{padding:1.5rem}
  .metrics-grid{grid-template-columns:repeat(2,1fr)}
  .login-card{width:calc(100vw - 2rem);padding:2rem 1.5rem}
}
